# Auth App 
[![Mutation testing badge](https://img.shields.io/endpoint?style=flat&url=https%3A%2F%2Fbadge-api.stryker-mutator.io%2Fgithub.com%2Fsamycici%2Fauth-app%2Fmaster)](https://dashboard.stryker-mutator.io/reports/github.com/samycici/auth-app/master) 
[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=samycici_auth-app&metric=alert_status)](https://sonarcloud.io/dashboard?id=samycici_auth-app)
[![CircleCI](https://circleci.com/gh/samycici/auth-app.svg?style=svg)](https://circleci.com/gh/samycici/auth-app)


> An app automatically generated by  @fullstackjs/create-fullstackjs-app module to demostrante some test concepts

### You'll need

- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/install/)

### To run the App

First you'll need to create an account at [smtp.mailtrap.io](smtp.mailtrap.io) and get your credentials.

Then you can create your env file:

```shell
cp .env.example .env
```

and fill `MAIL_USERNAME` and `MAIL_PASSWORD` with your mailtrap credentials.

After that you can build the server:

```shell
make build-server
```

Then you can try to create a new user
```shell
curl --location --request POST 'http://localhost:9000/api/v1/auth/register' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name": "Name Example",
    "email": "email@gmail.com",
    "password": "password"
}'
```

### To run tests

```shell
make test
```

### Test organization

```
auth-app
└───__mocks__
└───__tests__
    └───functional
    └───integration
    └───unit
    └───utils
└───coverage
```
Where in:
__mocks__ you will have the mock to mail service, so unit tests will not call the real mail package

__unit__ you will have unit tests, working with mocks and stubs

__integration__ you will have integration tests calling the database and other calling the API

__functional__ you will have the functional tests using [supertest](https://github.com/visionmedia/supertest)

__coverage__ you will have the coverage report genereated by [jest](https://jestjs.io/)

### Mutation Test

You can run the mutation tests using:

```shell
make mutation
```

And then access the [Dashboard Report](https://dashboard.stryker-mutator.io/reports/github.com/samycici/auth-app/master)

<p align="center">
  <a href="https://github.com/samycici/auth-app">
    <img src=".github/stryker.png" alt="Sonar">
  </a>
</p>

### Sonar Analysis

This project is being analyzed by [SonarCloud](https://sonarcloud.io/)

<p align="center">
  <a href="https://github.com/samycici/auth-app">
    <img src=".github/sonar.png" alt="Sonar">
  </a>
</p>
